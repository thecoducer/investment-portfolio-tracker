<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Investment Portfolio</title>
<meta name="viewport" content="width=device-width,initial-scale=1">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Karla:wght@400;500;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="/static/css/styles.css">
<link rel="preload" href="/static/js/app.js" as="script">
</head>
<body>
<div class="container">
<header>
<div class="nav-menu" id="navMenu">
<button class="nav-menu-btn" onclick="toggleNavMenu(event)">
<span class="hamburger-icon">
<span></span>
<span></span>
<span></span>
</span>
</button>
<div class="nav-menu-content">
<a href="/holdings" class="nav-menu-item active">
<span class="menu-icon">ğŸ“Š</span>Portfolio
</a>
<a href="/nifty50" class="nav-menu-item">
<span class="menu-icon">ğŸ“ˆ</span>Nifty 50
</a>
</div>
</div>
<div id="header_left">
<h1 id="header-title">Investment Portfolio</h1>
</div>
<div id="status_tag" class="">
<span class="status-dot"></span>
<span id="status_text">loading...</span>
</div>
<div class="controls">
<input id="search" placeholder="Search symbol or account..." />
<button class="btn" id="refresh_btn" onclick="triggerRefresh()">
    <span id="refresh_btn_text">Refresh</span>
</button>
<div class="toggle-group">
<button class="theme-toggle" id="compact_toggle_btn" onclick="toggleCompactFormat()" title="Toggle number format">
    <span id="compact_toggle_icon">ğŸ”¢</span>
</button>
<button class="theme-toggle" id="privacy_toggle_btn" onclick="togglePrivacy()" title="Toggle privacy mode">
    <span id="privacy_toggle_icon">ğŸ‘ï¸</span>
</button>
<button class="theme-toggle" id="theme_toggle_btn" onclick="toggleTheme()" title="Toggle theme">
    <span id="theme_toggle_icon">ğŸŒ™</span>
</button>
</div>
</div>
</header>

<div class="summary-cards">
<div class="card" id="combined_summary">
    <h3 class="card-title">Overall</h3>
    <div class="summary-item"><span class="summary-label">Invested</span><span class="summary-value" id="combined_total_invested">0.00</span></div>
    <div class="summary-item"><span class="summary-label">Current</span><span class="summary-value" id="combined_current_value">0.00</span></div>
    <div class="summary-item"><span class="summary-label">P/L</span><span class="summary-value" id="combined_total_pl">0.00</span></div>
    <div class="summary-item"><span class="summary-label">P/L %</span><span class="summary-value" id="combined_total_pl_pct">0.00%</span></div>
    <div class="loading-placeholder" id="combined_summary_loading" style="display:none;text-align:center;padding:8px 0;color:#8b7765;font-size:13px;">Loading data...</div>
</div>

<div class="card" id="portfolio_summary">
    <h3 class="card-title">Stocks</h3>
    <div class="summary-item"><span class="summary-label">Invested</span><span class="summary-value" id="total_invested">0.00</span></div>
    <div class="summary-item"><span class="summary-label">Current</span><span class="summary-value" id="current_value">0.00</span></div>
    <div class="summary-item"><span class="summary-label">P/L</span><span class="summary-value" id="total_pl">0.00</span></div>
    <div class="summary-item"><span class="summary-label">P/L %</span><span class="summary-value" id="total_pl_pct">0.00%</span></div>
    <div class="loading-placeholder" id="stocks_summary_loading" style="display:none;text-align:center;padding:8px 0;color:#8b7765;font-size:13px;">Loading data...</div>
</div>

<div class="card" id="mf_summary">
    <h3 class="card-title">Mutual Funds</h3>
    <div class="summary-item"><span class="summary-label">Invested</span><span class="summary-value" id="mf_total_invested">0.00</span></div>
    <div class="summary-item"><span class="summary-label">Current</span><span class="summary-value" id="mf_current_value">0.00</span></div>
    <div class="summary-item"><span class="summary-label">P/L</span><span class="summary-value" id="mf_total_pl">0.00</span></div>
    <div class="summary-item"><span class="summary-label">P/L %</span><span class="summary-value" id="mf_total_pl_pct">0.00%</span></div>
    <div class="loading-placeholder" id="mf_summary_loading" style="display:none;text-align:center;padding:8px 0;color:#8b7765;font-size:13px;">Loading data...</div>
</div>
</div>

<div class="section-wrapper" id="stocks-section">
<div class="section-header">
<h2>Stocks</h2>
<div class="controls-container">
<div class="sort-controls">
<span class="sort-icon">â‡…</span>
<select id="stocks_sort" onchange="window.sortStocksTable(this.value)">
<option value="default">Default Order</option>
<option value="pl_pct_desc">ğŸ”¥ P/L % (High to Low)</option>
<option value="pl_pct_asc">â„ï¸ P/L % (Low to High)</option>
<option value="pl_desc">ğŸ’° P/L Amount (High to Low)</option>
<option value="pl_asc">ğŸ’¸ P/L Amount (Low to High)</option>
<option value="invested_desc">ğŸ“ˆ Invested (High to Low)</option>
<option value="invested_asc">ğŸ“‰ Invested (Low to High)</option>
<option value="current_desc">ğŸ’µ Current (High to Low)</option>
<option value="current_asc">ğŸ’´ Current (Low to High)</option>
<option value="day_change_desc">ğŸ“Š Day's Change (High to Low)</option>
<option value="day_change_asc">ğŸ“‰ Day's Change (Low to High)</option>
<option value="symbol_asc">ğŸ”¤ Symbol (A-Z)</option>
<option value="symbol_desc">ğŸ”  Symbol (Z-A)</option>
</select>
</div>
<div class="pagination-controls">
<label for="stocks_page_size">Show:</label>
<select id="stocks_page_size" onchange="window.changeStocksPageSize(this.value)">
<option value="10">10</option>
<option value="25" selected>25</option>
<option value="50">50</option>
<option value="100">All</option>
</select>
</div>
</div>
</div>
<table aria-label="Holdings table">
<thead>
<tr>
<th>Symbol</th><th>Qty</th><th>Avg Price</th><th>Invested</th><th>Current</th><th>LTP</th><th>P/L</th><th>Day's Change</th><th>Exchange</th><th>Account</th>
</tr>
</thead>
<tbody id="tbody">
<tr class="loading-placeholder" id="stocks_table_loading"><td colspan="10"><span class="spinner"></span> Loading data...</td></tr>
</tbody>
</table>
<div class="pagination-info" id="stocks_pagination_info"></div>
<div class="pagination-buttons" id="stocks_pagination_buttons"></div>
</div>

<div class="section-wrapper" id="mf-section">
<div class="section-header">
<h2>Mutual Funds</h2>
<div class="controls-container">
<div class="sort-controls">
<span class="sort-icon">â‡…</span>
<select id="mf_sort" onchange="window.sortMFTable(this.value)">
<option value="default">Default Order</option>
<option value="pl_pct_desc">ğŸ”¥ P/L % (High to Low)</option>
<option value="pl_pct_asc">â„ï¸ P/L % (Low to High)</option>
<option value="pl_desc">ğŸ’° P/L Amount (High to Low)</option>
<option value="pl_asc">ğŸ’¸ P/L Amount (Low to High)</option>
<option value="invested_desc">ğŸ“ˆ Invested (High to Low)</option>
<option value="invested_asc">ğŸ“‰ Invested (Low to High)</option>
<option value="current_desc">ğŸ’µ Current (High to Low)</option>
<option value="current_asc">ğŸ’´ Current (Low to High)</option>
<option value="name_asc">ğŸ”¤ Fund Name (A-Z)</option>
<option value="name_desc">ğŸ”  Fund Name (Z-A)</option>
</select>
</div>
</div>
</div>
<table aria-label="MF Holdings table">
<thead>
<tr>
<th>Fund</th><th>Qty</th><th>Avg Price</th><th>Invested</th><th>Current</th><th>NAV</th><th>P/L</th><th>Account</th>
</tr>
</thead>
<tbody id="mf_tbody">
<tr class="loading-placeholder" id="mf_table_loading"><td colspan="8"><span class="spinner"></span> Loading data...</td></tr>
</tbody>
</table>
</div>

<div class="section-wrapper" id="sips-section">
<div class="section-header">
<h2>Active SIPs</h2>
</div>
<table aria-label="SIPs table">
<thead>
<tr>
<th>Fund</th><th>Amount</th><th>Frequency</th><th>Installments</th><th>Status</th><th>Next Due</th><th>Account</th>
</tr>
</thead>
<tbody id="sips_tbody">
<tr class="loading-placeholder" id="sips_table_loading"><td colspan="7"><span class="spinner"></span> Loading data...</td></tr>
</tbody>
</table>
</div>

<div class="footer-note">
Note: Refresh will only prompt login if session token is expired; otherwise it runs silently.
</div>
</div>

<script>
// Navigation menu toggle
function toggleNavMenu(event) {
  event.stopPropagation();
  const menu = document.getElementById('navMenu');
  menu.classList.toggle('active');
}

// Close menu when clicking outside
document.addEventListener('click', function(event) {
  const menu = document.getElementById('navMenu');
  if (menu && !menu.contains(event.target)) {
    menu.classList.remove('active');
  }
});
</script>

<script type="module" src="/static/js/app.js"></script>
</body>
</html>
