<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Investment Portfolio</title>
<meta name="viewport" content="width=device-width,initial-scale=1">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Karla:wght@400;500;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="/static/css/styles.css">
<link rel="preload" href="/static/js/app.js" as="script">
</head>
<body>
<div class="container">
<header>
<div class="nav-menu" id="navMenu">
<button class="nav-menu-btn" onclick="toggleNavMenu(event)">
<span class="hamburger-icon">
<span></span>
<span></span>
<span></span>
</span>
</button>
<div class="nav-menu-content">
<a href="/holdings" class="nav-menu-item active">
<span class="menu-icon">ğŸ“Š</span>Portfolio
</a>
<a href="/nifty50" class="nav-menu-item">
<span class="menu-icon">ğŸ“ˆ</span>Nifty 50
</a>
</div>
</div>
<div id="header_left">
<h1 id="header-title">Investment Portfolio</h1>
</div>
<div id="status_tag" class="">
<span class="status-dot"></span>
<span id="status_text">not loaded</span>
</div>
<div class="controls">
<input id="search" placeholder="Search symbol or account..." />
<button class="btn" id="refresh_btn" onclick="triggerRefresh()">
    <span id="refresh_btn_text">Refresh</span>
</button>
<div class="toggle-group">
<button class="theme-toggle" id="compact_toggle_btn" onclick="toggleCompactFormat()" title="Toggle number format">
    <span id="compact_toggle_icon">ğŸ”¢</span>
</button>
<button class="theme-toggle" id="privacy_toggle_btn" onclick="togglePrivacy()" title="Toggle privacy mode">
    <span id="privacy_toggle_icon">ğŸ‘ï¸</span>
</button>
<button class="theme-toggle" id="theme_toggle_btn" onclick="toggleTheme()" title="Toggle theme">
    <span id="theme_toggle_icon">ğŸŒ™</span>
</button>
</div>
</div>
</header>

<div class="summary-cards">
<div class="card" id="combined_summary">
    <h3 class="card-title">Overall</h3>
    <div class="card-metrics">
        <div class="summary-item"><span class="summary-label">Invested</span><span class="summary-value" id="combined_total_invested">0.00</span></div>
        <div class="summary-item"><span class="summary-label">Current</span><span class="summary-value" id="combined_current_value">0.00</span></div>
        <div class="summary-item"><span class="summary-label">P/L</span><span class="summary-value" id="combined_total_pl">0.00</span></div>
        <div class="summary-item"><span class="summary-label">P/L %</span><span class="summary-value" id="combined_total_pl_pct">0.00%</span></div>
    </div>
    <div class="loading-placeholder" id="combined_summary_loading" style="display:none;">Loading...</div>
</div>

<div class="card" id="portfolio_summary">
    <h3 class="card-title"><span class="allocation-pct" id="stocks_allocation_pct"></span>Stocks</h3>
    <div class="card-metrics">
        <div class="summary-item"><span class="summary-label">Invested</span><span class="summary-value" id="total_invested">0.00</span></div>
        <div class="summary-item"><span class="summary-label">Current</span><span class="summary-value" id="current_value">0.00</span></div>
        <div class="summary-item"><span class="summary-label">P/L</span><span class="summary-value" id="total_pl">0.00</span></div>
        <div class="summary-item"><span class="summary-label">P/L %</span><span class="summary-value" id="total_pl_pct">0.00%</span></div>
    </div>
    <div class="loading-placeholder" id="stocks_summary_loading" style="display:none;">Loading...</div>
</div>

<div class="card" id="mf_summary">
    <h3 class="card-title"><span class="allocation-pct" id="mf_allocation_pct"></span>Mutual Funds</h3>
    <div class="card-metrics">
        <div class="summary-item"><span class="summary-label">Invested</span><span class="summary-value" id="mf_total_invested">0.00</span></div>
        <div class="summary-item"><span class="summary-label">Current</span><span class="summary-value" id="mf_current_value">0.00</span></div>
        <div class="summary-item"><span class="summary-label">P/L</span><span class="summary-value" id="mf_total_pl">0.00</span></div>
        <div class="summary-item"><span class="summary-label">P/L %</span><span class="summary-value" id="mf_total_pl_pct">0.00%</span></div>
    </div>
    <div class="loading-placeholder" id="mf_summary_loading" style="display:none;">Loading...</div>
</div>

<div class="card" id="gold_summary">
    <h3 class="card-title"><span class="allocation-pct" id="gold_allocation_pct"></span>Gold</h3>
    <div class="card-metrics">
        <div class="summary-item"><span class="summary-label">Invested</span><span class="summary-value" id="gold_total_invested">0.00</span></div>
        <div class="summary-item"><span class="summary-label">Current</span><span class="summary-value" id="gold_current_value">0.00</span></div>
        <div class="summary-item"><span class="summary-label">P/L</span><span class="summary-value" id="gold_total_pl">0.00</span></div>
        <div class="summary-item"><span class="summary-label">P/L %</span><span class="summary-value" id="gold_total_pl_pct">0.00%</span></div>
    </div>
    <div class="loading-placeholder" id="gold_summary_loading" style="display:none;">Loading...</div>
</div>

<div class="card" id="silver_summary">
    <h3 class="card-title"><span class="allocation-pct" id="silver_allocation_pct"></span>Silver</h3>
    <div class="card-metrics">
        <div class="summary-item"><span class="summary-label">Invested</span><span class="summary-value" id="silver_total_invested">0.00</span></div>
        <div class="summary-item"><span class="summary-label">Current</span><span class="summary-value" id="silver_current_value">0.00</span></div>
        <div class="summary-item"><span class="summary-label">P/L</span><span class="summary-value" id="silver_total_pl">0.00</span></div>
        <div class="summary-item"><span class="summary-label">P/L %</span><span class="summary-value" id="silver_total_pl_pct">0.00%</span></div>
    </div>
    <div class="loading-placeholder" id="silver_summary_loading" style="display:none;">Loading...</div>
</div>
</div>

<div class="section-wrapper" id="stocks-section">
<div class="section-header">
<h2>Stocks</h2>
<div class="controls-container">
<div class="sort-controls">
<span class="sort-icon">â‡…</span>
<select id="stocks_sort" onchange="window.sortStocksTable(this.value)">
<option value="default">Default Order</option>
<option value="pl_pct_desc">ğŸ”¥ P/L % (High to Low)</option>
<option value="pl_pct_asc">â„ï¸ P/L % (Low to High)</option>
<option value="pl_desc">ğŸ’° P/L Amount (High to Low)</option>
<option value="pl_asc">ğŸ’¸ P/L Amount (Low to High)</option>
<option value="invested_desc">ğŸ“ˆ Invested (High to Low)</option>
<option value="invested_asc">ğŸ“‰ Invested (Low to High)</option>
<option value="current_desc">ğŸ’µ Current (High to Low)</option>
<option value="current_asc">ğŸ’´ Current (Low to High)</option>
<option value="day_change_desc">ğŸ“Š Day's Change (High to Low)</option>
<option value="day_change_asc">ğŸ“‰ Day's Change (Low to High)</option>
<option value="symbol_asc">ğŸ”¤ Symbol (A-Z)</option>
<option value="symbol_desc">ğŸ”  Symbol (Z-A)</option>
</select>
</div>
<div class="pagination-controls">
<label for="stocks_page_size">Show:</label>
<select id="stocks_page_size" onchange="window.changeStocksPageSize(this.value)">
<option value="10">10</option>
<option value="25" selected>25</option>
<option value="50">50</option>
<option value="100">All</option>
</select>
</div>
</div>
</div>
<table aria-label="Holdings table">
<thead>
<tr>
<th>Symbol</th><th>Qty</th><th>Avg Price</th><th>Invested</th><th>Current</th><th>LTP</th><th>P/L</th><th>Day's Change</th><th>Exchange</th><th>Account</th>
</tr>
</thead>
<tbody id="tbody">
</tbody>
</table>
<div class="empty-state-message" id="stocks_empty_state" style="display:none;">No stocks data available</div>
<div class="pagination-info" id="stocks_pagination_info"></div>
<div class="pagination-buttons" id="stocks_pagination_buttons"></div>
</div>

<div class="section-wrapper" id="mf-section">
<div class="section-header">
<h2>Mutual Funds</h2>
<div class="controls-container">
<div class="sort-controls">
<span class="sort-icon">â‡…</span>
<select id="mf_sort" onchange="window.sortMFTable(this.value)">
<option value="default">Default Order</option>
<option value="pl_pct_desc">ğŸ”¥ P/L % (High to Low)</option>
<option value="pl_pct_asc">â„ï¸ P/L % (Low to High)</option>
<option value="pl_desc">ğŸ’° P/L Amount (High to Low)</option>
<option value="pl_asc">ğŸ’¸ P/L Amount (Low to High)</option>
<option value="invested_desc">ğŸ“ˆ Invested (High to Low)</option>
<option value="invested_asc">ğŸ“‰ Invested (Low to High)</option>
<option value="current_desc">ğŸ’µ Current (High to Low)</option>
<option value="current_asc">ğŸ’´ Current (Low to High)</option>
<option value="name_asc">ğŸ”¤ Fund Name (A-Z)</option>
<option value="name_desc">ğŸ”  Fund Name (Z-A)</option>
</select>
</div>
<div class="pagination-controls">
<label for="mf_page_size">Show:</label>
<select id="mf_page_size" onchange="window.changeMFPageSize(this.value)">
<option value="10">10</option>
<option value="25" selected>25</option>
<option value="50">50</option>
<option value="100">All</option>
</select>
</div>
</div>
</div>
<table aria-label="MF Holdings table">
<thead>
<tr>
<th>Fund</th><th>Qty</th><th>Avg Price</th><th>Invested</th><th>Current</th><th>NAV</th><th>P/L</th><th>Account</th>
</tr>
</thead>
<tbody id="mf_tbody">
</tbody>
</table>
<div class="empty-state-message" id="mf_empty_state" style="display:none;">No mutual funds data available</div>
<div class="pagination-info" id="mf_pagination_info"></div>
<div class="pagination-buttons" id="mf_pagination_buttons"></div>
</div>

<!-- Physical Gold Section -->
{% if physical_gold_enabled %}
<div class="section-wrapper" id="physical-gold-section">
<div class="section-header">
<h2>Physical Gold</h2>
<div class="controls-container">
<div class="sort-controls">
<span class="sort-icon">â‡…</span>
<select id="physical_gold_sort" onchange="window.sortPhysicalGoldTable(this.value)">
<option value="default">Default Order</option>
<option value="date_desc">ğŸ“… Date (Newest First)</option>
<option value="date_asc">ğŸ“… Date (Oldest First)</option>
<option value="weight_desc">âš–ï¸ Weight (High to Low)</option>
<option value="weight_asc">âš–ï¸ Weight (Low to High)</option>
<option value="spend_desc">ğŸ’° Total Spend (High to Low)</option>
<option value="spend_asc">ğŸ’¸ Total Spend (Low to High)</option>
<option value="value_desc">ğŸ’µ Retail Value (High to Low)</option>
<option value="value_asc">ğŸ’´ Retail Value (Low to High)</option>
<option value="wastage_pct_desc">ğŸ“Š Wastage % (High to Low)</option>
<option value="wastage_pct_asc">ğŸ“Š Wastage % (Low to High)</option>
<option value="type_asc">ğŸ”¤ Type (A-Z)</option>
<option value="type_desc">ğŸ”  Type (Z-A)</option>
</select>
</div>
<div class="pagination-controls">
<label for="physical_gold_page_size">Show:</label>
<select id="physical_gold_page_size" onchange="window.changePhysicalGoldPageSize(this.value)">
<option value="10" selected>10</option>
<option value="25">25</option>
<option value="50">50</option>
<option value="100">All</option>
</select>
</div>
</div>
</div>
<table id="physicalGoldTable" aria-label="Physical Gold table">
<thead>
<tr>
<th>Date</th>
<th>Type</th>
<th>Retail Outlet</th>
<th>Purity</th>
<th>Weight (gms)</th>
<th>Bought IBJA Rate/gm</th>
<th>Latest IBJA Rate/gm</th>
<th>P/L</th>
</tr>
</thead>
<tbody id="physical_gold_table_body">
</tbody>
</table>
<div class="empty-state-message" id="physical_gold_empty_state" style="display:none;">No physical gold holdings available</div>
<div class="pagination-info" id="physical_gold_pagination_info"></div>
<div class="pagination-buttons" id="physical_gold_pagination_buttons"></div>
</div>
{% endif %}

<div class="section-wrapper" id="sips-section">
<div class="section-header">
<h2>Active SIPs</h2>
</div>
<table aria-label="SIPs table">
<thead>
<tr>
<th>Fund</th><th>Amount</th><th>Frequency</th><th>Installments</th><th>Status</th><th>Next Due</th><th>Account</th>
</tr>
</thead>
<tbody id="sips_tbody">
</tbody>
</table>
<div class="empty-state-message" id="sips_empty_state" style="display:none;">No active SIPs available</div>
</div>

<div class="footer-note">
Note: Refresh will only prompt login if session token is expired; otherwise it runs silently.
</div>
</div>

<script>
// Navigation menu toggle
function toggleNavMenu(event) {
  event.stopPropagation();
  const menu = document.getElementById('navMenu');
  menu.classList.toggle('active');
}

// Close menu when clicking outside
document.addEventListener('click', function(event) {
  const menu = document.getElementById('navMenu');
  if (menu && !menu.contains(event.target)) {
    menu.classList.remove('active');
  }
});
</script>

<script type="module" src="/static/js/app.js"></script>
</body>
</html>
